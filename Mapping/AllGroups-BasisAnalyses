  
#Install and Load Libraries 

install.packages("car")
install.packages("sm")
install.packages("ggplot2") # for general plots
install.packages("MASS") # for polr package
install.packages("generalhoslem") # for testing model fit (lipsitz test and two others)
install.packages("qwraps2") # for summary_table use
install.packages("quantreg") # testing quantile plots (geom_quantile) and quantile regressions
install.packages ("olsrr") #for testing normality
install.packages("ggpubr") #for density plots

library(ggplot2) 
library(MASS) 
library(generalhoslem) 
library(qwraps2) 
library(quantreg) 
library(olsrr)
library(car)
library(sm)
library(ggpubr)


#Check and Set Working Directory
      setwd("~/Desktop")
      getwd()      
      
#Import Data [[make sure is most recent version and saved as csv]]
      Map <- read.csv("Mapping_Coding_KW_200327.csv", na.strings = "N/A")
      #224 kids
      View(Map)   

## MAPPING DATA FRAME ## 
  Map_Inc <- subset(Map, Map$Age_Rounded>=5 & Map$Age_Rounded<=10 & Map$Mappig_Include.=="Yes" & Map$Coded. == "Yes")
  View(Map_Inc) #141

#RANDOM VISUALIZATIONS/ANALYSES FOR NOW!
M_SumTotalCorr <- Map_Inc$SumCorrectTotal_All
M_Age <- Map_Inc$Age_Rounded
M_SES <- Map_Inc$SES
M_Grps <- Map_Inc$Group_4cat
M_Tim <- Map_Inc$Timing
M_Mod <- Map_Inc$Modality

#VIOLIN PLOT TOTAL # CORRECT BY 4 GROUPS
ggplot(Map_Inc, aes(x=M_Grps, y=M_SumTotalCorr, fill = M_Grps)) + geom_violin() + geom_boxplot(width = 0.2) + labs (x= "Experimental Groups", y = "Total Correct (out of 51)") + stat_summary(fun.data = mean.n, geom = "text", fun = median) + stat_summary(fun.data = mean.n, geom= "text", fun=mean, color= "gainsboro") + theme(legend.position="none")

#VIOLIN PLOT TIMING GROUPS BY OVERALL PROP CORRECT
T_AvgCorr <- ggplot(Map_Inc, aes(Timing, y=AvgCorrect_Total, fill=Timing)) + geom_violin() + labs(x="Language Timing", y="Overall Proportion Correct")
T_AvgCorr

#VIOLIN PLOT MODALITY GROUPS BY OVERALL PROP CORRECT
M_AvgCorr <- ggplot(Map_Inc, aes(Modality, y=AvgCorrect_Total, fill=Modality)) + geom_violin() + labs(x="Language Modality", y="Overall Proportion Correct")
M_AvgCorr

